var mainRun=function(){"use strict";var e={},t={},a=function(e){var t;return e.apiKey?(t=e.url||"https://api.teamtailor.com/v1/jobs?",t+="api_version=20161108&",t+="include=department,locations&",t+="fields[departments]=name&",t+="fields[locations]=name,city&",t+="page[number]="+e.pagenum+"&",e.limit&&(e.limit=Math.min(e.limit,30),t=t+"page[size]="+e.limit+"&"),e.feed?t=t+"filter[feed]="+e.feed+"&":t+="filter[feed]=public&",e.departments&&(t=t+"filter[department]="+e.departments+"&"),e.region&&(t=t+"filter[regions]="+e.region+"&"),e.preselectedDepartment&&(t=t+"filter[department]="+e.preselectedDepartment+"&"),e.preselectedLocation&&(t=t+"filter[locations]="+e.preselectedLocation+"&"),e.locations&&(t=t+"filter[locations]="+e.locations+"&"),t=t+"api_key="+e.apiKey+"&"):(t=e.url||"https://tt.teamtailor.com/api/jobs?",e.limit&&(t=t+"limit="+e.limit+"&"),e.preselectedDepartment&&(t=t+"department_name="+e.preselectedDepartment+"&"),e.departments&&(t=t+"department_id="+e.departments+"&"),e.locations&&(t=t+"location_id="+e.locations+"&"),e.internalJobs&&(t=t+"internal="+e.internalJobs+"&"),t=t+"company_id="+e.company),t},n=function(e,t){var a,n=!!window.XDomainRequest,i=function(){t(JSON.parse(a.responseText))};n?((a=new window.XDomainRequest).onprogress=function(){return!0},a.onload=i,a.open("GET",e)):((a=new XMLHttpRequest).open("GET",e,!0),a.onreadystatechange=function(){4===this.readyState&&200<=this.status&&this.status<400&&i()}),a.send()},i=function(e,t,a,r){void 0===r&&(r=[]),a.apiKey?n(e,function(e){if(r=r.concat(e.data),e.links&&e.links.next){var n=e.links.next;n+="&api_key="+a.apiKey,i(n+="&api_version=20161108",t,a,r)}else e.data=r,t(e)}):n(e,t)},r=function(a){if(a)for(var n=0;n<a.length;n++)"departments"===a[n].type?e[a[n].id]=a[n]:"locations"===a[n].type&&(t[a[n].id]=a[n])},o=function(e){return e.location_name||(e.relationships&&e.relationships.locations.data?e.relationships.locations.data.map(function(e){var a=t[e.id];return a?a.attributes.name&&""!==a.attributes.name?a.attributes.name:a.attributes.city:null}).join(", "):null)},l=function(t){var a=function(t){var a=t.department_name;if(a)return a;if(t.relationships&&t.relationships.department.data){var n=e[t.relationships.department.data.id];if(n)return n.attributes.name}return null}(t);if(!a)return null;var n=document.createElement("span");return n.className="teamtailor-jobs__department",void 0!==n.textContent?n.textContent=a:n.innerText=a,n},s=function(e){var t=document.createElement("span");t.className="teamtailor-jobs__job-info";var a=l(e),n=function(e){var t=o(e);if(!t)return null;var a=document.createElement("span");return a.className="teamtailor-jobs__location",void 0!==a.textContent?a.textContent=t:a.innerText=t,a}(e);return a&&t.appendChild(a),a&&n&&t.appendChild(document.createTextNode(" - ")),n&&t.appendChild(n),t},m=function(e,t){var a=document.createElement("div");return a.className="teamtailor-jobs__job",a.appendChild(function(e,t){var a,n=document.createElement("a"),i=(a=e.links?e.attributes.internal?e.links["careersite-job-internal-url"]:e.links["careersite-job-url"]:t.internalJobs?e.preview_url:e.url).split("/")[2];a+="?utm_campaign=jobs-widget&utm_source="+i+"&utm_content=jobs&utm_medium=web",n.className="teamtailor-jobs__job-title",n.setAttribute("href",a),t.popup&&n.setAttribute("target","_blank");var r=e.title||e.attributes.title;return void 0!==n.textContent?n.textContent=r:n.innerText=r,n}(e,t)),a.appendChild(s(e)),a},c=function(e,t,a){var n,i=e.querySelectorAll(".teamtailor-jobs__job-wrapper")[0];if(i.style.minHeight="550px",i.innerHTML="",a.apiKey?(n=t.data,r(t.included)):n=t.jobs,0===n.length)d(i);else for(var o=0;o<n.length;++o)i.appendChild(m(n[o],a));var l=document.createElement("div");l.className="teamtailor-jobs__paging",e.appendChild(l),p(e,t,a)},d=function(e){var t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.width="100%",t.style.height="300px",t.style.fontSize="x-large";var a=document.createElement("a");a.innerHTML="Connect with us",a.href="https://careers.wsa.com/connect",a.target="_blank";var n=document.createElement("p");n.appendChild(a),n.appendChild(document.createTextNode(" to stay up to date on new openings.")),t.appendChild(n),e.appendChild(t)},p=function(e,t,i){var r=e.querySelectorAll(".teamtailor-jobs__paging")[0];r.innerHTML="",r.style.textAlign="center";var o=t.meta["page-count"];if(o>1)for(var l=0;l<o;++l){var s=document.createElement("button");s.innerHTML=l+1,s.style.margin=".3em",l+1==i.pagenum?(s.style.backgroundColor="#778899",s.style.color="white",s.style.border="2px solid #778899",s.disabled=!0):s.addEventListener("click",function(t){i.pagenum=t.target.innerHTML,n(a(i),function(t){c(e,t,i)})}),r.appendChild(s)}},u=function(e,t,r){var o;r.apiKey?(o=r.url||"https://api.teamtailor.com/v1/"+e+"?api_key="+r.apiKey+"&api_version=20161108","locations"===e?(o=r.url||"https://api.teamtailor.com/v1/locations?api_key="+r.apiKey+"&api_version=20161108",o+="&fields[locations]=name,country,city"):(o=r.url||"https://api.teamtailor.com/v1/departments?api_key="+r.apiKey+"&api_version=20161108",o+="&fields[departments]=name")):o="https://tt.teamtailor.com/api/"+e+"?company_id="+r.company;var l=document.createElement("div"),s=t.querySelectorAll(".teamtailor-jobs__filters")[0];l.style.textAlign="right",l.className="teamtailor-jobs__select-wrapper",s.appendChild(l),i(o,function(i){(i.items&&i.items.length||i.data&&i.data.length)&&function(e,t,i,r,o){var l=document.createElement("option"),s=document.createElement("select");s.className="teamtailor-jobs__select";var m,d,p=function(e){var a;a="locations"===t?e.attributes?e.attributes.name&&""!==e.attributes.name?e.attributes.name:e.attributes.city:e.name:e.attributes?e.attributes.name:e.name;var n=document.createElement("option");return n.value=e.id,n.innerText=a,n};o.apiKey?(m=e.meta.texts.all,d=e.data):(m=e.text,d=e.items),l.innerText=m,l.value="",s.appendChild(l),d="locations"===t?d.filter(e=>"Australia"===e.attributes.country):d;for(var u=0;u<d.length;++u)s.appendChild(p(d[u]));s.addEventListener("change",function(e){o[t]=e.target.value,n(a(o),function(e){c(i,e,o)})}),r.appendChild(s)}(i,e,t,l,r)},r)};return{init:function(e){e.company||e.apiKey?n(a(e),function(t){var a=e.jobsWidget||document.getElementById("teamtailor-jobs-widget"),n=document.createElement("div");if(n.className="teamtailor-jobs__job-wrapper",a.appendChild(n),c(a,t,e),(e.departmentSelect||e.locationSelect)&&(!e.preselectedDepartment||!e.preselectedLocation)){var i=document.createElement("div");i.className="teamtailor-jobs__filters",a.insertBefore(i,n),e.locationSelect&&!e.preselectedLocation&&u("locations",a,e),e.departmentSelect&&!e.preselectedDepartment&&u("departments",a,e)}}):alert("missing api key")},run:function(){if(!window.TEAMTAILOR_JOB_SCRIPT_LOADED){window.TEAMTAILOR_JOB_SCRIPT_LOADED=!0,function(){var e="",t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");e+=".teamtailor-jobs__job-title { display: block; }",e+=".teamtailor-jobs__job { margin-bottom: 1em; }",e+=".teamtailor-jobs__select-wrapper { float: right; margin: 0 1em 1em 0; }",e+=".teamtailor-jobs__job-wrapper { clear: right; }",a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}();for(var e=document.querySelectorAll(".teamtailor-jobs-widget"),t=0;t<e.length;++t)Teamtailor.JobsSource.init({company:e[t].getAttribute("data-teamtailor-company"),apiKey:e[t].getAttribute("data-teamtailor-api-key"),region:e[t].getAttribute("data-teamtailor-region"),limit:e[t].getAttribute("data-teamtailor-limit"),pagenum:e[t].getAttribute("data-teamtailor-pagenum"),preselectedDepartment:e[t].getAttribute("data-teamtailor-department"),preselectedLocation:e[t].getAttribute("data-teamtailor-location"),popup:e[t].getAttribute("data-teamtailor-popup"),internalJobs:e[t].getAttribute("data-teamtailor-internal-jobs"),feed:e[t].getAttribute("data-teamtailor-feed"),departmentSelect:e[t].getAttribute("data-teamtailor-department-select"),locationSelect:e[t].getAttribute("data-teamtailor-location-select"),jobsWidget:e[t]})}}}}(),Teamtailor=window.Teamtailor||{};Teamtailor.JobsSource=Teamtailor.JobsSource||mainRun,"complete"===document.readyState||"interactive"===document.readyState||Teamtailor.JobsSource||Teamtailor.JobsSource.run?Teamtailor.JobsSource.run():document.addEventListener("DOMContentLoaded",Teamtailor.JobsSource.run);
